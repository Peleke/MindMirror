# Disabled Workflows

This directory contains workflows that have been disabled (renamed with `.disabled` extension).

## ci-build-deploy.yml.disabled

**Disabled**: 2025-10-25
**Reason**: Conflicts with new deployment workflows and uses deprecated service account key authentication

### Why Disabled

1. **Conflicts with production-deploy.yml**: Both triggered on push to `main`, causing duplicate builds
2. **Wrong Artifact Registry**: Uses `us-central1-docker.pkg.dev/services` (old) vs `us-east4-docker.pkg.dev/mindmirror` (current)
3. **Service Account Keys**: Uses deprecated `credentials_json` authentication instead of WIF
4. **Wrong Project**: Uses generic `GCP_PROJECT_ID` secret instead of proper staging/production separation

### Replacement Workflows

The functionality has been replaced by:
- **staging-deploy.yml**: Builds and deploys to staging (mindmirror-69)
- **production-deploy.yml**: Builds and deploys to production (mindmirror-prod)
- **tofu-apply-staging.yml**: Infrastructure deployment to staging
- **tofu-apply-production.yml**: Infrastructure deployment to production

All replacement workflows use:
- ✅ Workload Identity Federation (WIF) - no service account keys
- ✅ Proper project separation (staging vs production)
- ✅ Correct Artifact Registry paths
- ✅ Manual approval gates for safety

### To Re-enable (Not Recommended)

If you need to reference this workflow:
```bash
# Just look at the .disabled file - DO NOT rename it back
cat .github/workflows/ci-build-deploy.yml.disabled
```

**Do not re-enable this workflow** - it will conflict with the current deployment system.
