# Story 8.2: Onboarding Launch & Completion Screens

## Status
Draft

## Story
**As a** mobile developer
**I want** launch and completion screens to frame the onboarding conversation
**so that** users understand what's happening and feel motivated to complete

## Acceptance Criteria

1. **Launch Screen:** Friendly illustration, headline "Let's personalize your experience", subtext "This will take about 2 minutes", "Get Started" button, "Skip for now" link
2. **Completion Screen:** Confetti animation, "You're all set, [Name]!" headline, summary card "Your personalized calorie target: 2,200/day", "Start exploring" button
3. Launch screen shown on first login (no previous profile exists)
4. Completion screen shown after successful profile extraction
5. Skip link creates skipped profile, navigates to main app

## Tasks / Subtasks

- [ ] Create launch screen (AC: 1, 3)
  - [ ] Create `OnboardingLaunch.tsx` screen component
  - [ ] Add friendly illustration (AI coach character or fitness graphic)
  - [ ] Add headline: "Let's personalize your experience"
  - [ ] Add subtext: "This will take about 2 minutes"
  - [ ] Add "Get Started" button (navigates to chat screen)
  - [ ] Add "Skip for now" link at bottom
  - [ ] Check for existing profile on mount (if exists, skip to main app)

- [ ] Create completion screen (AC: 2, 4)
  - [ ] Create `OnboardingComplete.tsx` screen component
  - [ ] Add confetti animation (use `react-native-confetti-cannon`)
  - [ ] Add headline: "You're all set, [Name]!" (personalized with user name)
  - [ ] Add summary card with calorie target (fetch from profile)
  - [ ] Add "Start exploring" button (navigates to main app home)

- [ ] Implement skip functionality (AC: 5)
  - [ ] Call `updateOnboardingStatus` mutation with status="skipped"
  - [ ] Navigate to main app home screen
  - [ ] Show toast: "You can complete your profile anytime in Settings"

- [ ] Add navigation routing
  - [ ] Route: `/onboarding/launch` → first screen
  - [ ] Route: `/onboarding/chat` → chat conversation
  - [ ] Route: `/onboarding/complete` → completion screen
  - [ ] After completion, navigate to `/(app)/home`

## Dev Notes

### Relevant Source Tree
- **Location:** `mindmirror-mobile/app/(onboarding)/launch.tsx`
- **Location:** `mindmirror-mobile/app/(onboarding)/complete.tsx`
- **Assets:** `mindmirror-mobile/assets/images/onboarding-illustration.png`

### Key Technical Details
- Expo Router for navigation (existing)
- `react-native-confetti-cannon` for confetti effect
- Fetch user profile via Apollo Client GraphQL query
- Skip creates partial profile (users_service mutation)

### Implementation Notes
```typescript
// Launch screen
import { router } from 'expo-router';
import { Image, Text, TouchableOpacity } from 'react-native';

export default function OnboardingLaunch() {
  const handleGetStarted = () => {
    router.push('/(onboarding)/chat');
  };

  const handleSkip = async () => {
    await updateOnboardingStatus({ status: 'skipped' });
    router.replace('/(app)/home');
  };

  return (
    <View style={styles.container}>
      <Image source={require('@/assets/images/onboarding-illustration.png')} />
      <Text style={styles.headline}>Let's personalize your experience</Text>
      <Text style={styles.subtext}>This will take about 2 minutes</Text>
      <TouchableOpacity onPress={handleGetStarted}>
        <Text>Get Started</Text>
      </TouchableOpacity>
      <TouchableOpacity onPress={handleSkip}>
        <Text style={styles.skipLink}>Skip for now</Text>
      </TouchableOpacity>
    </View>
  );
}

// Completion screen
import ConfettiCannon from 'react-native-confetti-cannon';

export default function OnboardingComplete() {
  const { data } = useQuery(GET_USER_PROFILE);

  return (
    <View style={styles.container}>
      <ConfettiCannon count={200} origin={{x: -10, y: 0}} />
      <Text style={styles.headline}>You're all set, {data.userProfile.name}!</Text>
      <View style={styles.summaryCard}>
        <Text>Your personalized calorie target:</Text>
        <Text style={styles.calorieTarget}>
          {data.userProfile.eatingProfile.calorieTarget} cal/day
        </Text>
      </View>
      <TouchableOpacity onPress={() => router.replace('/(app)/home')}>
        <Text>Start exploring</Text>
      </TouchableOpacity>
    </View>
  );
}
```

### Testing
**Test file location:** `mindmirror-mobile/app/(onboarding)/__tests__/`

**Test standards:**
- Screen rendering tests
- Navigation flow tests (launch → chat → complete → home)
- Skip functionality test

**Testing frameworks:**
- Jest + React Native Testing Library
- Expo Router testing utilities

**Specific testing requirements:**
- Test launch screen renders correctly
- Test "Get Started" navigates to chat
- Test "Skip" creates skipped profile and navigates to home
- Test completion screen shows personalized name
- Test confetti animation triggers

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-20 | v1.0 | Initial story creation from Epic 8 | Mary (Business Analyst) |

## Dev Agent Record

### Agent Model Used
_To be populated by dev agent_

### Debug Log References
_To be populated by dev agent_

### Completion Notes
_To be populated by dev agent_

### File List
_To be populated by dev agent_

## QA Results
_To be populated by QA agent_
