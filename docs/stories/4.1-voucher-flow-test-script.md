# Story 4.1: Voucher Flow Manual Test Script

## Status
Draft

## Story
**As a** QA tester
**I want** step-by-step test script for voucher-based auto-enrollment flow
**so that** I can validate all 7 steps work correctly before inviting alpha users

## Acceptance Criteria

1. Test script document (Markdown) covers 7-step voucher flow:
   - Step 1: Generate magic link via admin UI
   - Step 2: Copy link to incognito browser
   - Step 3: Verify voucher minted (check Supabase vouchers table)
   - Step 4: Complete signup with matching email
   - Step 5: Login and verify program auto-assigned
   - Step 6: Navigate to workout screen, verify program visible
   - Step 7: Log 1 set, verify data saved
2. Each step has: Expected result, Pass/Fail checkbox, Screenshot placeholder
3. Edge cases covered: Mismatched email, expired voucher, duplicate enrollment
4. Script executable by non-technical PM (clear instructions, no jargon)
5. Script saved to `docs/testing/voucher-flow-test-script.md`

## Tasks / Subtasks

- [ ] Create test script document structure (AC: 1, 2, 5)
  - [ ] Create `docs/testing/` directory
  - [ ] Create `voucher-flow-test-script.md` file
  - [ ] Add 7-step test procedure with checkboxes and screenshot placeholders

- [ ] Document happy path (AC: 1, 2)
  - [ ] Step 1: Admin UI magic link generation (include URL, form fields, expected output)
  - [ ] Step 2: Incognito browser test (why incognito, how to open)
  - [ ] Step 3: Supabase voucher verification (SQL query or dashboard check)
  - [ ] Step 4: Signup flow (form fields, email confirmation if required)
  - [ ] Step 5: Login and program verification (where to check, what to look for)
  - [ ] Step 6: Workout screen navigation (navigation path, expected UI)
  - [ ] Step 7: Set logging test (log 1 set, verify in database or UI)

- [ ] Document edge cases (AC: 3)
  - [ ] Edge case 1: Mismatched email (voucher email â‰  signup email, expected error)
  - [ ] Edge case 2: Expired voucher (create expired voucher, expect rejection)
  - [ ] Edge case 3: Duplicate enrollment (enroll same user twice, expect error or deduplication)

- [ ] Make PM-friendly (AC: 4)
  - [ ] Use clear language (avoid technical jargon)
  - [ ] Include screenshots or mockups for visual reference
  - [ ] Add troubleshooting tips (common errors, how to resolve)
  - [ ] Test with PM: Can they execute without engineering help?

## Dev Notes

### Relevant Source Tree
- **Test Script Location:** `docs/testing/voucher-flow-test-script.md`
- **Related Docs:** `docs/alpha-validation-week-1.md` (7-step voucher flow reference)
- **Admin UI:** `web/src/app/admin/vouchers/create` (from Story 1.1)

### Key Technical Details
- 7-step voucher flow documented in `docs/alpha-validation-week-1.md`
- Supabase vouchers table can be checked via Supabase Dashboard or SQL
- Edge cases should simulate real-world scenarios (typos, expired links, etc.)

### Implementation Notes
- Use Markdown tables for test steps (clean formatting)
- Include expected vs actual result columns
- Add timestamp field for test execution tracking
- Consider adding pre-test setup section (required accounts, test data)

### TEST SCRIPT TEMPLATE
```markdown
# Voucher Flow Test Script

## Pre-Test Setup
- [ ] Admin account logged in
- [ ] Test program created (ID: _____)
- [ ] Incognito browser window ready

## Test Steps

### Step 1: Generate Magic Link
- **Action:** Navigate to `/admin/vouchers/create`, fill form, submit
- **Expected:** Magic link displayed, voucher ID shown
- **Pass/Fail:** [ ]
- **Screenshot:** [Placeholder]

... (repeat for all 7 steps)

## Edge Cases
### Edge Case 1: Mismatched Email
...
```

### Testing
**Test file location:** This IS the test artifact (no automated tests)

**Test standards:**
- PM can execute test script independently
- Test script execution time <30 minutes
- All edge cases covered

**Testing frameworks:**
- Manual testing only (script guides tester)

**Specific testing requirements:**
- Validate with PM: Can they understand and execute each step?
- Ensure screenshots are clear and helpful
- Test edge cases are realistic and cover common failure modes

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-15 | v1.0 | Initial story creation from Epic 4 | Sarah (PO Agent) |

## Dev Agent Record

### Agent Model Used
_To be populated by dev agent_

### Debug Log References
_To be populated by dev agent_

### Completion Notes
_To be populated by dev agent_

### File List
_To be populated by dev agent_

## QA Results
_To be populated by QA agent_
