# Story 1.2: Program Assignment Dashboard

## Status
Draft

## Story
**As a** coach/admin
**I want** a dashboard showing all created programs and their enrollments
**so that** I can verify alpha users are correctly assigned to workout programs

## Acceptance Criteria

1. Dashboard lists all programs with: name, creation date, enrolled user count
2. Click program â†’ shows enrolled users with: email, enrollment date, completion status
3. Visual indicator for "active" vs "completed" enrollments
4. Search/filter by program name or user email
5. Responsive design (works on mobile for field testing)

## Tasks / Subtasks

- [ ] Create dashboard page at `/admin/programs` (AC: 1, 5)
  - [ ] Add route to Next.js app (`web/src/app/admin/programs/page.tsx`)
  - [ ] Design responsive layout for program list view
  - [ ] Implement mobile-friendly table/card design

- [ ] Query programs and enrollment data (AC: 1, 2)
  - [ ] Create GraphQL query to practices_service for programs list
  - [ ] Fetch enrollment counts per program
  - [ ] Implement drill-down view for enrolled users per program

- [ ] Add visual indicators (AC: 3)
  - [ ] Badge/icon for active enrollments (green)
  - [ ] Badge/icon for completed enrollments (gray)
  - [ ] Display completion percentage if available

- [ ] Implement search/filter functionality (AC: 4)
  - [ ] Add search input for program name
  - [ ] Add filter dropdown for user email
  - [ ] Implement client-side filtering or server-side query params

## Dev Notes

### Relevant Source Tree
- **Location:** `web/src/app/admin/` (existing admin directory)
- **GraphQL:** practices_service schema for programs and enrollments
- **Component Pattern:** Likely table or card list with drill-down modal/page

### Key Technical Details
- practices_service GraphQL endpoint provides program + enrollment data
- Enrollment status may need to be calculated (practice_instance completion tracking)
- Apollo Client for data fetching
- Consider using React Query for caching if data updates frequently

### Implementation Notes
- Use responsive table library (e.g., TanStack Table) or custom card layout
- Optimize GraphQL queries (avoid N+1 queries for enrollments)
- Consider pagination if program list grows (not critical for alpha)

### Testing
**Test file location:** `web/src/app/admin/__tests__/programs.test.tsx`

**Test standards:**
- Unit tests for search/filter logic
- Integration test for GraphQL query mocking
- Visual regression tests for responsive layout (optional)

**Testing frameworks:**
- Jest + React Testing Library
- Mock Apollo Client for GraphQL queries

**Specific testing requirements:**
- Test programs list renders correctly
- Test drill-down view shows enrolled users
- Test search/filter functionality
- Test responsive layout on mobile viewport

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-15 | v1.0 | Initial story creation from Epic 1 | Sarah (PO Agent) |

## Dev Agent Record

### Agent Model Used
_To be populated by dev agent_

### Debug Log References
_To be populated by dev agent_

### Completion Notes
_To be populated by dev agent_

### File List
_To be populated by dev agent_

## QA Results
_To be populated by QA agent_
